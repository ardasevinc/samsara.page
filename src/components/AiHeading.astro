---
const OPENAI_API_KEY =
  import.meta.env.OPENAI_API_KEY ||
  (Astro.locals.runtime.env.OPENAI_API_KEY as string);
const openAiAPI = "https://api.openai.com/v1/chat/completions";
const openAiOptions = {
  model: "gpt-3.5-turbo",
  temperature: 0.9,
  frequency_penalty: 0.9,
  messages: [
    {
      role: "system",
      content:
        "Immediately return a 3-6 word subtitle for the website of IZTECH AI Society that is going to released very soon. DO NOT RETURN ANYTHING ELSE",
    },
  ],
};

const fetchOptions = {
  method: "POST",
  temperature: 0.9,
  presence_penalty: 1.9,
  max_tokens: 30,
  headers: {
    "Content-Type": "application/json",
    Authorization: `Bearer ${OPENAI_API_KEY}`,
  },
  body: JSON.stringify(openAiOptions),
};

// console.log(fetchOptions);

const aiText =
  (await fetch(openAiAPI, fetchOptions).then(async (res) => {
    const jsonRes = await res.json();
    console.log(jsonRes);
    return jsonRes?.choices?.at(0).message?.content.replaceAll('"', "");
  })) || "Coming very soon.";

// console.log(aiText);
---

<h2 id="ai-heading" class="text-gray-400 text-3xl">
  {aiText}
</h2>
